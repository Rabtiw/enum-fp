"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.validateArgs=exports.isOfType=exports.validateRecord=exports.values=exports.some=exports.all=void 0;var _commonUtils=require("../common-utils");var _ArgLessEnum=_interopRequireDefault(require("../ArgLessEnum"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}var all=function all(list,fn){return list.length===_toConsumableArray(list).filter(fn).length};exports.all=all;var some=function some(list,fn){return!!_toConsumableArray(list).filter(fn).length};exports.some=some;var values=function values(obj){return Object.keys(obj).sort().map(function(k){return obj[k]})};// Cant use Type to define Type
exports.values=values;var Type=(0,_ArgLessEnum.default)(["Any","String","Number","Bool","List","Map","Record","Func","Enum","OneOf"]);var validateList=function validateList(innerType,list){return(0,_commonUtils.isList)(list)&&(innerType&&list.length>0?all(list,isOfType(innerType)):true)};var validateRecord=function validateRecord(shape,obj){return validateArgs(values(shape),values(obj))};exports.validateRecord=validateRecord;var isOfType=function isOfType(type){return function(value){// Dynamic argument description
if(typeof type==="string"&&value!==undefined)return true;if(Type.isConstructor(type)){return!!Type.match(type,{Any:function Any(){return true},String:function String(){return typeof value==="string"},Number:function Number(){return typeof value==="number"},Bool:function Bool(){return typeof value==="boolean"},Func:function Func(){return typeof value==="function"},List:function List(innerType){return validateList(innerType,value)},Map:function Map(innerType){return innerType&&(0,_commonUtils.isObject)(value)&&validateList(innerType,values(value))},Record:function Record(shape){return(0,_commonUtils.isObject)(value)&&(shape?validateRecord(shape,value):true)},OneOf:function OneOf(typeList){return some(typeList,function(type){return isOfType(type)(value)})},Enum:function Enum(InnerType){return value&&InnerType.isConstructor(value)}})}return true}};exports.isOfType=isOfType;var validateArgs=function validateArgs(_ref,_ref2){var _ref3=_toArray(_ref),type=_ref3[0],types=_ref3.slice(1);var _ref4=_toArray(_ref2),val=_ref4[0],vals=_ref4.slice(1);if(!isOfType(type)(val))return false;return types.length>0?validateArgs(types,vals):true};exports.validateArgs=validateArgs;var _default=Type;exports.default=_default;